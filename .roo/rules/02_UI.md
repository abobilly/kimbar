# UI Architecture â€” UI Layer + RexUI

## Canonical structure
- UI is isolated on the UI layer rendered by the UI camera.
- Attach all UI elements via `WorldScene.getUILayer()`; this is the only attachment point.
- UI must not be affected by world camera zoom/scroll.
- Never add UI elements to world display lists or use `scrollFactor` hacks to "fix" placement.

## RexUI usage rules
- Compose UI with RexUI primitives: `Panel`, `Sizer`, `Label`, `Button`, `ChoiceList`, `BBCodeText`.
- Build reusable tokens/styles (padding, colors, fonts) and inject them into primitives instead of duplicating inline styling.
- Handle interaction state explicitly (hover, focus, disabled) and mirror those states in RexUI configs.

## Dialogue migration (Phase A priority)
- Dialogue UI must live entirely inside `UIScene`.
- Choices disable immediately after selection and remain visually distinct until the next prompt.
- Panels must not clip text; adjust layout or scrolling if required.
- Camera movement or zoom must not alter UI position or scale.

## Validation checklist
- Confirm UI layer isolation via tests or logging when wiring new components.
- Capture screenshots or GIFs when visual changes are significant; attach references in `NEXT_SESSION.md`.
- Update documentation when introducing new tokens or layouts.
