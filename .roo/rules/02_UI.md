# UI Architecture — UIScene + RexUI

## Canonical structure
- `UIScene` (or equivalent UI container) is the only scene that manages UI elements.
- All UI must be attached to the scene’s dedicated UI layer via `WorldScene.getUILayer()` and rendered through the UI camera.
- Never attach UI elements to world display lists or rely on `scrollFactor` corrections.

## RexUI usage rules
- Compose UI with RexUI primitives: `Panel`, `Sizer`, `Label`, `Button`, `ChoiceList`, `BBCodeText`.
- Build reusable tokens/styles (padding, colors, fonts) and inject them into primitives instead of duplicating inline styling.
- Handle interaction state explicitly (hover, focus, disabled) and mirror those states in RexUI configs.

## Dialogue migration (Phase A priority)
- Dialogue UI must live entirely inside `UIScene`.
- Choices disable immediately after selection and remain visually distinct until the next prompt.
- Panels must not clip text; adjust layout or scrolling if required.
- Camera movement or zoom must not alter UI position or scale.

## Validation checklist
- Confirm UI layer isolation via tests or logging when wiring new components.
- Capture screenshots or GIFs when visual changes are significant; attach references in `NEXT_SESSION.md`.
- Update documentation when introducing new tokens or layouts.
