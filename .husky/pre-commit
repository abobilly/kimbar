#!/bin/sh

# Check for macOS artifacts in staged files
if git diff --cached --name-only | grep -q "__MACOSX"; then
  echo "ERROR: __MACOSX directory detected in staged files. Remove before committing."
  exit 1
fi

if git diff --cached --name-only | grep -q "/\._"; then
  echo "ERROR: macOS resource fork (._*) files detected in staged files. Remove before committing."
  exit 1
fi

# Run standard precommit checks
npm run precommit
